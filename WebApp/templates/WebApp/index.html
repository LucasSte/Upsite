{% extends 'WebApp/base.html' %}

{% block title %}Relevant topics{% endblock %}

{% block header_content %}
    <div id="profile_area">
        {% if user.is_authenticated %}
            <p>Hi {{ user.username }}!</p>
            <p><a href="{% url 'logout' %}">Logout</a></p>
        {% else %}
          <p>You are not logged in</p>
          <p><a href="{% url 'signup' %}">Sign up</a> <a href="{% url 'login' %}">Login</a></p>
        {% endif %}
    </div>
{% endblock %}

{% block content %}

    {% if best_voted_topics %}
    <ul>
        {% for topic in best_voted_topics %}
            <div class="box">
                <div class="votes">
                    <form action="{% url 'Topics:upvote' topic.id %}" method='POST'>
                        {% csrf_token %}
                        <button type='submit'>UpVote</button>
                    </form>
                        <br>
                        Votes: <br> {{topic.votes}}
                        <br>
                        <br>
                    <form action="{% url 'Topics:downvote' topic.id %}" method='POST'>
                        {% csrf_token %}
                        <button type='submit'>DownVote</button>
                    </form>
                </div>
                <div class="content">
                    <li><a href="/Topics/{{topic.id}}">{{topic.title_text}}</a>
                        <br> {{topic.small_description}}<br>
                    <br> </li>
                </div>
            </div>


        {% endfor %}
    </ul>
    {% else %}
    <p>No topics are available.</p>
    {% endif %}

{% endblock %}