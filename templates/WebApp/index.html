{% extends 'WebApp/base.html' %}

{% block title %}Relevant topics{% endblock %}

{% block content %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
<br>
{% if topics %}
<ul>
    {% for topic in topics %}
        <div class="box">
            <div class="votes">
                <form action="{% url 'upvote_main' topic.id %}" method='POST'>
                    {% csrf_token %}
                    <button type='submit'>UpVote</button>
                </form>
                    <br>
                    Votes: <br> {{topic.votes}}
                    <br>
                    <br>
                <form action="{% url 'downvote_main' topic.id %}" method='POST'>
                    {% csrf_token %}
                    <button type='submit'>DownVote</button>
                </form>
            </div>
            <div class="content">
                <li><a href="/Topics/{{topic.id}}">{{topic.title_text}}</a>
                    <br> {{topic.small_description}}
                    <br> Creator: {{topic.creator}}<br>
                <br> </li>
            </div>
        </div>


    {% endfor %}
</ul>

{% if not search %}
{% if first_page %}
<form action="{% url 'load_page' next_page %}" method="GET">
    <button type="submit">Next page</button>
</form>

{% elif last_page %}
<form action="{% url 'load_page' previous_page %}" method="GET">
    <button type="submit">Previous page</button>
</form>

{% else %}
<form action="{% url 'load_page' next_page %}" method="GET">
    <button type="submit">Next page</button>
</form>
<br>
<form action="{% url 'load_page' previous_page %}" method="GET">
    <button type="submit">Previous page</button>
</form>

{% endif %}
{% endif %}



{% else %}
<p>No topics found using the search query "{{ request.GET.q }}".</p>
{% endif %}
{% endblock %}